<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My document</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <div class="topnav">
        <a href="index.html">Home</a>
        <a class="active" href="login.html">Login</a>
        <a href="register.html">Sign up</a>
        <a href="#">Games</a>
    </div>

    <h3>Santorini</h3>
    <input type="text" id="email" placeholder="E-mail">
    <input type="password" id="inpPassword" placeholder="Password">
    <br><br>
    <button onclick="btnlogin()">Login</button>
    <h3 id="textResult">Result...</h3>

    <div id="container"></div>



    <!-- HTML elements here... -->

</body>

<script>
    let email = document.getElementById("email");
    let password = document.getElementById("password");
    let textResult = document.getElementById('txtResult');
    async function sendRequest() {




        let url = "http://localhost:8000/users/login";

        let updata = {
            email: inpEmail.value,
            password: inpPassword.value
        };

        let cfg = {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(updata)
        };

        try {
            let resp = await fetch(url, cfg);
            let data = await resp.text();

            if (resp.status > 202) {
                throw(data);
            };

            txtResult.innerHTML = data.email + "is logged in!";
            sessionStorage.setItem("logindata", JSON.stringify(data));
        }
        catch (err) {
            console.log(err);
        }
    }

    function btnregister() {
        window.location.href = "register.html"
    }

    function btnlogin() {
        sendRequest();
        console.log("Login")
    }

    function btnhome() {
        window.location.href = "index.html";
    }

    /* JavaScript here... */

</script>

</html>